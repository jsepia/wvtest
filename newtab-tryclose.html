<!DOCTYPE html>
<html>
<head>
    <title>Leonardo</title>
    <link rel="shortcut icon" type="image/png" href="https://d3u8ewz6c11pt5.cloudfront.net/static/kshare/0.22/1c2904b8e11a/img/KP_favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" type="image/png" href="https://d3u8ewz6c11pt5.cloudfront.net/static/kshare/0.22/1c2904b8e11a/img/Icon-60.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="120x120" type="image/png" href="https://d3u8ewz6c11pt5.cloudfront.net/static/kshare/0.22/1c2904b8e11a/img/Icon-60@2x.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="180x180" type="image/png" href="https://d3u8ewz6c11pt5.cloudfront.net/static/kshare/0.22/1c2904b8e11a/img/Icon-60@3x.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="76x76" type="image/png" href="https://d3u8ewz6c11pt5.cloudfront.net/static/kshare/0.22/1c2904b8e11a/img/Icon-76.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="152x152" type="image/png" href="https://d3u8ewz6c11pt5.cloudfront.net/static/kshare/0.22/1c2904b8e11a/img/Icon-76@2x.png"/>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<h1>LEONARDO - Child tab</h1>
<p>Try window.close. If it doesn't work, redirect back to hardcoded URL.</p>
<button id="btn-close" data-url="parent.html">Close</button>
<script type="text/javascript">
    function closeCurrentTab(fallbackUrl) {
        window.close();
        setTimeout(function() {
            location.href = fallbackUrl;
        }, 3000);
    }

    var btn = document.getElementById('btn-close');
    var fallbackUrl = btn.dataset.url;
    btn.onclick = function() {
        closeCurrentTab(fallbackUrl);
    };
</script>
</body>
</html>
